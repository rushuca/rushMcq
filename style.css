*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:#1d1b26;color:#e9e7f2}
h1,h2,h3,h4{margin:0 0 .5rem}
h1{font-size:1.75rem}
h2{font-size:1.25rem}

/* --- Lock Screen --- */
.lock-screen-cover {
  max-width: 150px; 
  margin-bottom: 1rem;
}
.lock-screen-cover img {
  width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}

/* --- Layout & Views --- */
.app-header{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid #3c384d;background:#242131;position:sticky;top:0;z-index:5}
.header-actions{display:flex;gap:.5rem}
.view{display:none;padding:1rem;max-width:1100px;margin:0 auto; animation: fadeIn 0.5s ease-in-out;}
.view.active{display:block}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* --- Book Info Section --- */
.book-info-container { display: grid; grid-template-columns: 200px 1fr; gap: 1.5rem; align-items: center; padding: 1.5rem; }
.book-cover img { width: 100%; height: auto; border-radius: 8px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.book-details h3 { color: #fff; border-bottom: 1px solid #7c3aed; padding-bottom: 0.5rem; margin-bottom: 1rem; }
.book-details p { line-height: 1.6; color: #c0b9d6; }
.book-details ul { list-style: none; padding-left: 0; color: #c0b9d6; }
.book-details li { margin-bottom: 0.5rem; }
@media (max-width: 600px) {
  .book-info-container { grid-template-columns: 1fr; text-align: center; }
  .book-cover { max-width: 150px; margin: 0 auto 1rem auto; }
}

/* --- Cards & Trial Info --- */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem}
.card{background:#2a273a;border:1px solid #3c384d;border-radius:16px;padding:1rem;box-shadow:0 10px 30px rgba(0,0,0,.25); transition: transform 0.2s ease, box-shadow 0.2s ease;}
.card:hover { transform: translateY(-4px); box-shadow: 0 15px 35px rgba(0,0,0,.3); }
.card h3{margin:.25rem 0 .5rem; color: #fff;}
.card p{margin:.25rem 0;color:#c0b9d6}
.trial-info {
  font-size: 0.8rem;
  color: #a9a2c1;
  font-style: italic;
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px dashed #524c66;
}
.trial-info-inline {
    font-size: 0.9rem;
    color: #a9a2c1;
    font-style: italic;
}

/* --- Buttons --- */
.btn{border:1px solid #5a546e;background:#3a364a;color:#e9e7f2;padding:.6rem 1rem;border-radius:12px;cursor:pointer;transition:all .2s;box-shadow:0 6px 20px rgba(0,0,0,.2)}
.btn:hover{transform:translateY(-2px);box-shadow: 0 8px 25px rgba(124, 58, 237, 0.2);}
.btn.primary{background:#7c3aed;border-color:#7c3aed;color:white}
.btn.primary:hover{background:#8b5cf6}
.btn.ghost{background:transparent;border-color:#5a546e}
.btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

/* --- Quiz & Panels --- */
.quiz-topbar{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem}
.quiz-topbar > div { display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;}
.chapter-title-left { font-size: 1.2rem; font-weight: bold; }
.progress { color: #c0b9d6; }
.quiz-container{display:grid;gap:1rem}
.quiz-container.two-col{grid-template-columns:2fr 1fr}
@media (max-width:900px){.quiz-container.two-col{grid-template-columns:1fr}}
.question-panel {background:#2a273a;border:1px solid #3c384d;border-radius:16px;padding:1.5rem;}
.nav-panel{background:#2a273a;border:1px solid #3c384d;border-radius:16px;padding:1rem}
.progress-bar-container { background-color: #3a364a; border-radius: 8px; overflow: hidden; margin-bottom: 1rem; }
.progress-bar { height: 8px; background-color: #7c3aed; width: 0%; transition: width 0.4s ease-in-out; }
.question-text { font-size: 1.2rem; line-height: 1.6; margin-bottom: 1.5rem; }
.options { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; }
.option-btn { width: 100%; background: #3a364a; border: 1px solid #5a546e; border-radius: 12px; padding: 1rem; font-size: 1rem; color: #e9e7f2; cursor: pointer; text-align: left; transition: all 0.2s ease; }
.option-btn:not(:disabled):hover { background: #4a455c; transform: translateY(-2px); }

/* --- UPDATED Answer Highlighting --- */
/* This rule makes the user's WRONG selection red */
.option-btn.selected.wrong { 
    background-color: #5c2121; 
    border-color: #d64545; 
    color: #fff; 
}
/* This rule makes the CORRECT answer green, whether it was selected or not */
.option-btn.correct { 
    background-color: #1a4d2e; 
    border-color: #28a745; 
    color: #fff; 
}
/* This handles the reveal for the 'Answer' button */
.option-btn.answer-reveal {
    background-color: #1a4d2e; 
    border-color: #28a745; 
    color: #fff; 
}

.explanation{margin-top:1.5rem;padding:1rem;border-left:4px solid #7c3aed;background:#32214a;color:#e8dff5;border-radius:8px; animation: fadeIn 0.5s;}
.hidden{display:none}
.nav-buttons{display:grid; grid-template-columns: 1fr 1fr 1fr; gap:.5rem; margin-bottom:1rem}
.score-box{border-top:1px dashed #4a455c;padding-top:1rem;color:#c0b9d6; display: flex; flex-direction: column; gap: 0.5rem;}
.end-screen{text-align:center;background:#2a273a;border:1px solid #3c384d;border-radius:16px;padding:1.5rem;margin-top:1rem}
.end-screen-actions { display:flex; justify-content:center; gap:1rem; margin-top:1.5rem; flex-wrap: wrap;}
.review-item { margin-bottom: 2rem; padding: 1rem; background: #2a273a; border-radius: 12px; border: 1px solid #3c384d; }
.review-question { font-weight: bold; margin-bottom: 1rem; }
.review-options { list-style: none; padding-left: 0; }
.review-option { padding: 0.5rem; border-radius: 8px; margin-bottom: 0.5rem; border: 1px solid #5a546e; }
.review-option.correct { background-color: #1a4d2e; }
.review-option.user-wrong { background-color: #5c2121; text-decoration: line-through; }
.review-explanation { margin-top: 1rem; padding: 1rem; background: #32214a; border-left: 4px solid #5a546e; border-radius: 8px; }

/* --- Misc & Splash --- */
.designer { font-size: 0.8rem; color: #a9a2c1; margin-top: -0.25rem; }
.designer-footer { text-align: center; font-size: 0.75rem; color: #8e84a9; margin: 1.5rem 0 0.5rem; }
.splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #4c1d95, #1e1b29); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; color: #fff; font-family: 'Segoe UI', sans-serif; text-align: center; animation: fadeIn 1.2s ease-in-out; }
.splash-title { font-size: 2.5rem; font-weight: bold; margin-bottom: 10px; animation: slideDown 1s ease forwards; }
.splash-subtitle { font-size: 1.2rem; opacity: 0.9; }
@keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.splash-hide { opacity: 0; visibility: hidden; transition: opacity 0.8s ease, visibility 0.8s ease; }
.splash-skip { margin-top: 20px; font-size: 1rem; font-style: italic; opacity: 0.8; animation: blink 1.5s infinite; }
@keyframes blink { 0%, 50%, 100% { opacity: 0.8; } 25%, 75% { opacity: 0.2; } }
